{"version":3,"file":"shadow.markup.react.impl.interop.js","sources":["shadow/markup/react/impl/interop.cljs"],"mappings":";;;;;;;;;;;;;;AAIA,AAAsBY,kDAEhB,iBAAAa,WADA,0CAAA,MAAA,hDAACG;IACDF,WAAA;AAAA,AAAA,uBAAAD,SAAAC,zBAACC;;AAEP,kDAAA,lDAAMd,4GAAUR;AACd,QAAK,AAAC4B,wBAAQ5B,QACT,AAAC8B,6CAAEvB,gDAAe,kBAAA,lBAACe,gBAAStB,rJAFnC;;AAIA,iDAAA,jDAAMY,0GAAea;AACnB,AADF,GAEI,UAAA,TAAMA;AADR;;AAAA,GAGE,AAACI,qBAAKJ;AACN,OAACD,qBAAQC;;AAJX,AAMEA;;;;;AAIJ,wDAAA,xDAAM9B,wHAAiBI;GACd,AAACE,uBAAOF,1BADjB,AAAA;AAAA;AAAA,AAAA,MAAA,KAAA2B,MAAA;;;AAEE,uDAAA,hDAAQH,qDAAwBxB;;AAElC,oDAAA,pDAAMD,gHAAaC,IAAIC;AAAvB,AACE,AAAOD,SAAIC;;AACXD;;AAEF,8CAAA,9CAAMM,oGAAYN,IAAIO;AAAtB,AACE,OAACI,+CAAOZ,kDAAYC,IAAIO;;AAG1B,kDAAA,lDAAMqB,4GAAgB9B,KAAKsB;AACzB,IAAAN,aAAoBM,jBADtB;IACEL,aAAA,AAAAC,cAAAF;IAAAG,eAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;WAAAE,PAAOb;WAAPW,PAAcR;AAAd,GAEI,AAACuB,qBAAK1B,xBADR;AAEE,OAACR,sDACC,iBAAAgB,WAAA,CAAWd,KAAK,AAACe,+CAAcT;AAA/B,AACE,4CAAAQ,5CAACN,qDAAWC;;AADdK;;;GAGF,SAAA,RAAMR,JANR;AAOE,OAACR,sDACC,iBAAAS,WAAA,MAAA,LAAWP;AACT,4CAAAO,5CAACC,qDAAWC,rDADd;;AAAAF;;;oBAGF,AAACI,gDAASL,pEAXZ;6DAaI,iBAAAM,WAAA,MAAA,LAAWZ,1FADb,OAACF;AACC,AACE,4CAAAc,5CAACJ,qDAAWc;;AADdV;;;GAGF,AAACmB,wBAAQzB,3BAhBX;6DAkBI,iBAAAD,WAAA,CAAWL,KAAKM,/FADlB,OAACR;AACC,AACE,4CAAAO,5CAACG,qDAAWC;;AADdJ;;;AAIF,OAACP,sDACC,iBAAAC,WAAA,MAAA,LAAWC,1FAvBf;AAuBI,AACE,4CAAAD,5CAACS,qDAAWc;;AADdvB","names":["shadow.markup.react.impl.interop/create-element*","G__29347","type","shadow.markup.react.impl.interop/arr-append*","arr","x","cljs.core/array?","G__29346","head","G__29344","shadow.markup.react.impl.interop/arr-append","tail","shadow.markup.react.impl.interop/element-marker","shadow.markup.react.impl.interop/element?","G__29345","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","G__29343","shadow.markup.react.impl.interop/convert-props","vec__29340","seq__29341","cljs.core/seq","first__29342","cljs.core/first","cljs.core/next","args","G__29332","G__29333","goog.object/get","js/shadow.js.shim.module$react.createElement","cljs.core/clj->js","props","js/Error","shadow.markup.react.impl.interop/create-element","cljs.core/object?","cljs.core/map?","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns shadow.markup.react.impl.interop\n  (:require [goog.object :as gobj]\n            [\"react\" :as react]))\n\n(def ^{:private true} element-marker\n  (-> (react/createElement \"div\" nil)\n      (gobj/get \"$$typeof\")))\n\n(defn element? [x]\n  (and (object? x)\n       (= element-marker (gobj/get x \"$$typeof\"))))\n\n(defn convert-props [props]\n  (cond\n    (nil? props)\n    #js {}\n    (map? props)\n    (clj->js props)\n    :else\n    props))\n\n;; called from macro\n;; react v16 is really picky, the old direct .children prop trick no longer works\n(defn create-element* [arr]\n  {:pre [(array? arr)]}\n  (.apply react/createElement nil arr))\n\n(defn arr-append* [arr x]\n  (.push arr x)\n  arr)\n\n(defn arr-append [arr tail]\n  (reduce arr-append* arr tail))\n\n;; fallback if the macro didn't do this\n(defn create-element [type args]\n  (let [[head & tail] args]\n    (cond\n      (map? head)\n      (create-element*\n        (doto #js [type (convert-props head)]\n          (arr-append tail)))\n\n      (nil? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append tail)))\n\n      (element? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n\n      (object? head)\n      (create-element*\n        (doto #js [type head]\n          (arr-append tail)))\n\n      :else\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n      )))\n\n"]}